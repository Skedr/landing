---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Prose from "../../components/Prose.astro";
import ClockIcon from "astro-heroicons/outline/Clock.astro";
import CalendarIcon from "astro-heroicons/outline/Calendar.astro";

export async function getStaticPaths() {
  const blogEntries = await getCollection("posts");
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { title, description, tags, time, pubDate, pretitle } = entry.data;
const { Content } = await entry.render();
const meta = {
  title: "Automated sharing and scheduling for Flickr Groups",
  description:
    "Skedr helps you spend less time sharing photos to Flickr groups.",
};
---

<Layout meta={meta}>
  <div class="relative py-12 lg:py-20 px-4 sm:px-6 lg:px-8">
    <div class="text-center">
      <p
        class="text-lg leading-6 font-semibold text-gray-300 uppercase tracking-wider"
      >
        Blog
      </p>
      <h1
        class="mt-2 text-3xl font-extrabold text-white sm:text-4xl lg:text-5xl"
      >
        {title}
      </h1>
      <p
        class="mt-3 max-w-4xl mx-auto text-xl text-gray-300 sm:mt-5 sm:text-2xl"
      >
        {description}
      </p>
    </div>
  </div>
  <div class="bg-white px-6 py-20 lg:px-8">
    <div class="mx-auto max-w-3xl text-base leading-7 text-gray-700">
      <div class="flex justify-between">
        <div class="space-x-2">
          {
            tags.map((tag) => (
              <span class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">
                {tag}
              </span>
            ))
          }
        </div>

        <div class="inline-flex items-center text-sm">
          <ClockIcon class="h-3 w-3 mr-1" />
          {time} min read -
          <CalendarIcon class="h-3 w-3 mx-1" />
          {pubDate.toLocaleDateString()}
        </div>
      </div>

      <p class="mt-8 text-base font-semibold leading-7 text-indigo-600">
        {pretitle}
      </p>
      <Prose>
        <Content />
      </Prose>
    </div>
  </div>
</Layout>
